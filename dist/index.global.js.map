{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export type Listener = ((..._args: unknown[]) => void) & {\n  onCleanup?: (_release: () => void) => void;\n};\n\nclass Notifier {\n  private _listeners: Record<string, Set<Listener>> = {};\n\n  addListener(event: string, listener: Listener): () => void {\n    if (typeof event !== \"string\" || typeof listener !== \"function\") {\n      throw new Error(\"Event name must be a string, listener must be a function\");\n    }\n\n    if (!this._listeners[event]) {\n      this._listeners[event] = new Set();\n    }\n\n    const cleanup = () => this.removeListener(event, listener);\n\n    if (!this._listeners[event].has(listener)) {\n      this._listeners[event].add(listener);\n      if (typeof listener.onCleanup === \"function\") {\n        listener.onCleanup(cleanup);\n      }\n    }\n\n    return cleanup;\n  }\n\n  removeListener(event: string, listener: Listener): void {\n    if (typeof event !== \"string\" || typeof listener !== \"function\") {\n      throw new Error(\"Event name must be a string, listener must be a function\");\n    }\n\n    const listeners = this._listeners[event];\n    if (listeners && listeners.has(listener)) {\n      listeners.delete(listener);\n      if (listeners.size === 0) {\n        delete this._listeners[event];\n      }\n    }\n  }\n\n  notify(event: string, ...args: unknown[]): void {\n    const listeners = this._listeners[event];\n    if (listeners) {\n      const listenersArray = [...listeners];\n      for (const listener of listenersArray) {\n        listener(...args);\n      }\n    }\n  }\n}\n\nexport default Notifier;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAIA,MAAM,WAAN,MAAe;AAAA,IAAf;AACE,WAAQ,aAA4C,CAAC;AAAA;AAAA,IAErD,YAAY,OAAe,UAAgC;AACzD,UAAI,OAAO,UAAU,YAAY,OAAO,aAAa,YAAY;AAC/D,cAAM,IAAI,MAAM,0DAA0D;AAAA,MAC5E;AAEA,UAAI,CAAC,KAAK,WAAW,KAAK,GAAG;AAC3B,aAAK,WAAW,KAAK,IAAI,oBAAI,IAAI;AAAA,MACnC;AAEA,YAAM,UAAU,MAAM,KAAK,eAAe,OAAO,QAAQ;AAEzD,UAAI,CAAC,KAAK,WAAW,KAAK,EAAE,IAAI,QAAQ,GAAG;AACzC,aAAK,WAAW,KAAK,EAAE,IAAI,QAAQ;AACnC,YAAI,OAAO,SAAS,cAAc,YAAY;AAC5C,mBAAS,UAAU,OAAO;AAAA,QAC5B;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAAA,IAEA,eAAe,OAAe,UAA0B;AACtD,UAAI,OAAO,UAAU,YAAY,OAAO,aAAa,YAAY;AAC/D,cAAM,IAAI,MAAM,0DAA0D;AAAA,MAC5E;AAEA,YAAM,YAAY,KAAK,WAAW,KAAK;AACvC,UAAI,aAAa,UAAU,IAAI,QAAQ,GAAG;AACxC,kBAAU,OAAO,QAAQ;AACzB,YAAI,UAAU,SAAS,GAAG;AACxB,iBAAO,KAAK,WAAW,KAAK;AAAA,QAC9B;AAAA,MACF;AAAA,IACF;AAAA,IAEA,OAAO,UAAkB,MAAuB;AAC9C,YAAM,YAAY,KAAK,WAAW,KAAK;AACvC,UAAI,WAAW;AACb,cAAM,iBAAiB,CAAC,GAAG,SAAS;AACpC,mBAAW,YAAY,gBAAgB;AACrC,mBAAS,GAAG,IAAI;AAAA,QAClB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,MAAO,gBAAQ;","names":[]}