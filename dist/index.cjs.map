{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export type Listener = ((...args: any[]) => any) & {\r\n  afterSubscribe?: (unsubscribe: () => void) => void;\r\n};\r\n\r\nclass Notifier {\r\n  private _listeners: Record<string, Set<Listener>> = {};\r\n\r\n  addListener(event: string, listener: Listener): () => void {\r\n    if (typeof event !== \"string\" || typeof listener !== \"function\") {\r\n      throw new Error(\"Event name must be a string, listener must be a function\");\r\n    }\r\n\r\n    if (!this._listeners[event]) {\r\n      this._listeners[event] = new Set();\r\n    }\r\n\r\n    const unsubscribe = () => this.removeListener(event, listener);\r\n\r\n    if (!this._listeners[event].has(listener)) {\r\n      this._listeners[event].add(listener);\r\n      if (typeof listener.afterSubscribe === \"function\") {\r\n        listener.afterSubscribe(unsubscribe);\r\n      }\r\n    }\r\n\r\n    return unsubscribe;\r\n  }\r\n\r\n  removeListener(event: string, listener: Listener): void {\r\n    if (typeof event !== \"string\" || typeof listener !== \"function\") {\r\n      throw new Error(\"Event name must be a string, listener must be a function\");\r\n    }\r\n\r\n    const listeners = this._listeners[event];\r\n    if (listeners && listeners.has(listener)) {\r\n      listeners.delete(listener);\r\n      if (listeners.size === 0) {\r\n        delete this._listeners[event];\r\n      }\r\n    }\r\n  }\r\n\r\n  notify(event: string, ...args: unknown[]): void {\r\n    const listeners = this._listeners[event];\r\n    if (listeners) {\r\n      const listenersArray = [...listeners];\r\n      for (const listener of listenersArray) {\r\n        listener(...args);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Notifier;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,IAAM,WAAN,MAAe;AAAA,EAAf;AACE,SAAQ,aAA4C,CAAC;AAAA;AAAA,EAErD,YAAY,OAAe,UAAgC;AACzD,QAAI,OAAO,UAAU,YAAY,OAAO,aAAa,YAAY;AAC/D,YAAM,IAAI,MAAM,0DAA0D;AAAA,IAC5E;AAEA,QAAI,CAAC,KAAK,WAAW,KAAK,GAAG;AAC3B,WAAK,WAAW,KAAK,IAAI,oBAAI,IAAI;AAAA,IACnC;AAEA,UAAM,cAAc,MAAM,KAAK,eAAe,OAAO,QAAQ;AAE7D,QAAI,CAAC,KAAK,WAAW,KAAK,EAAE,IAAI,QAAQ,GAAG;AACzC,WAAK,WAAW,KAAK,EAAE,IAAI,QAAQ;AACnC,UAAI,OAAO,SAAS,mBAAmB,YAAY;AACjD,iBAAS,eAAe,WAAW;AAAA,MACrC;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,eAAe,OAAe,UAA0B;AACtD,QAAI,OAAO,UAAU,YAAY,OAAO,aAAa,YAAY;AAC/D,YAAM,IAAI,MAAM,0DAA0D;AAAA,IAC5E;AAEA,UAAM,YAAY,KAAK,WAAW,KAAK;AACvC,QAAI,aAAa,UAAU,IAAI,QAAQ,GAAG;AACxC,gBAAU,OAAO,QAAQ;AACzB,UAAI,UAAU,SAAS,GAAG;AACxB,eAAO,KAAK,WAAW,KAAK;AAAA,MAC9B;AAAA,IACF;AAAA,EACF;AAAA,EAEA,OAAO,UAAkB,MAAuB;AAC9C,UAAM,YAAY,KAAK,WAAW,KAAK;AACvC,QAAI,WAAW;AACb,YAAM,iBAAiB,CAAC,GAAG,SAAS;AACpC,iBAAW,YAAY,gBAAgB;AACrC,iBAAS,GAAG,IAAI;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AACF;AAEA,IAAO,gBAAQ;","names":[]}