"use strict";module.exports=class{constructor(){this.listeners={}}addListener(e,t){if("string"!=typeof e||"function"!=typeof t)throw new Error("Event name must be a string, listener must be a function");this.listeners[e]=this.listeners[e]||new Set;const s=()=>this.removeListener(e,t);return this.listeners[e].has(t)||(this.listeners[e].add(t),"function"==typeof t.onCleanup&&t.onCleanup(s)),s}addOnceListener(e,t){if("string"!=typeof e||"function"!=typeof t)throw new Error("Event name must be a string, listener must be a function");const s=(...n)=>{this.removeListener(e,s),t(...n)};"function"==typeof t.onCleanup&&(s.onCleanup=t.onCleanup),this.addListener(e,s)}removeListener(e,t){if("string"!=typeof e||"function"!=typeof t)throw new Error("Event name must be a string, listener must be a function");this.listeners[e]&&this.listeners[e].has(t)&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e])}notify(e,...t){if(this.listeners[e]){[...this.listeners[e]].forEach(s=>{try{s(...t)}catch(t){console.error(`Error in listener for event ${e}:`,t)}})}}removeAllListeners(e){e?this.listeners[e]&&delete this.listeners[e]:this.listeners={}}};
//# sourceMappingURL=index.cjs.js.map
